﻿// This file was auto-generated by ML.NET Model Builder. 
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.ML.Data;
using Microsoft.ML.Trainers.FastTree;
using Microsoft.ML.Trainers;
using Microsoft.ML;

namespace Diplom
{
    public partial class MLModel
    {
        public static ITransformer RetrainPipeline(MLContext context, IDataView trainData)
        {
            var pipeline = BuildPipeline(context);
            var model = pipeline.Fit(trainData);

            return model;
        }

        /// <summary>
        /// build the pipeline that is used from model builder. Use this function to retrain model.
        /// </summary>
        /// <param name="mlContext"></param>
        /// <returns></returns>
        public static IEstimator<ITransformer> BuildPipeline(MLContext mlContext)
        {
            // Data process configuration with pipeline data transformations
            var pipeline = mlContext.Transforms.ReplaceMissingValues(new []{new InputOutputColumnPair(@"Open", @"Open"),new InputOutputColumnPair(@"Close", @"Close"),new InputOutputColumnPair(@"High", @"High"),new InputOutputColumnPair(@"Low", @"Low"),new InputOutputColumnPair(@"Volume", @"Volume"),new InputOutputColumnPair(@"Open2", @"Open2"),new InputOutputColumnPair(@"Close2", @"Close2"),new InputOutputColumnPair(@"High2", @"High2"),new InputOutputColumnPair(@"Low2", @"Low2"),new InputOutputColumnPair(@"Volume2", @"Volume2"),new InputOutputColumnPair(@"Open3", @"Open3"),new InputOutputColumnPair(@"Close3", @"Close3"),new InputOutputColumnPair(@"High3", @"High3"),new InputOutputColumnPair(@"Low3", @"Low3"),new InputOutputColumnPair(@"Volume3", @"Volume3"),new InputOutputColumnPair(@"Open4", @"Open4"),new InputOutputColumnPair(@"Close4", @"Close4"),new InputOutputColumnPair(@"High4", @"High4"),new InputOutputColumnPair(@"Low4", @"Low4"),new InputOutputColumnPair(@"Volume4", @"Volume4"),new InputOutputColumnPair(@"Open5", @"Open5"),new InputOutputColumnPair(@"Close5", @"Close5"),new InputOutputColumnPair(@"High5", @"High5"),new InputOutputColumnPair(@"Low5", @"Low5"),new InputOutputColumnPair(@"Volume5", @"Volume5"),new InputOutputColumnPair(@"Open6", @"Open6"),new InputOutputColumnPair(@"Close6", @"Close6"),new InputOutputColumnPair(@"High6", @"High6"),new InputOutputColumnPair(@"Low6", @"Low6"),new InputOutputColumnPair(@"Volume6", @"Volume6"),new InputOutputColumnPair(@"Open7", @"Open7"),new InputOutputColumnPair(@"Close7", @"Close7"),new InputOutputColumnPair(@"High7", @"High7"),new InputOutputColumnPair(@"Low7", @"Low7"),new InputOutputColumnPair(@"Volume7", @"Volume7"),new InputOutputColumnPair(@"Open8", @"Open8"),new InputOutputColumnPair(@"Close8", @"Close8"),new InputOutputColumnPair(@"High8", @"High8"),new InputOutputColumnPair(@"Low8", @"Low8"),new InputOutputColumnPair(@"Volume8", @"Volume8"),new InputOutputColumnPair(@"Open9", @"Open9"),new InputOutputColumnPair(@"Close9", @"Close9"),new InputOutputColumnPair(@"High9", @"High9"),new InputOutputColumnPair(@"Low9", @"Low9"),new InputOutputColumnPair(@"Volume9", @"Volume9"),new InputOutputColumnPair(@"Open10", @"Open10"),new InputOutputColumnPair(@"Close10", @"Close10"),new InputOutputColumnPair(@"High10", @"High10"),new InputOutputColumnPair(@"Low10", @"Low10"),new InputOutputColumnPair(@"Volume10", @"Volume10"),new InputOutputColumnPair(@"Open11", @"Open11"),new InputOutputColumnPair(@"Close11", @"Close11"),new InputOutputColumnPair(@"High11", @"High11"),new InputOutputColumnPair(@"Low11", @"Low11"),new InputOutputColumnPair(@"Volume11", @"Volume11"),new InputOutputColumnPair(@"Open12", @"Open12"),new InputOutputColumnPair(@"Close12", @"Close12"),new InputOutputColumnPair(@"High12", @"High12"),new InputOutputColumnPair(@"Low12", @"Low12"),new InputOutputColumnPair(@"Volume12", @"Volume12"),new InputOutputColumnPair(@"Open13", @"Open13"),new InputOutputColumnPair(@"Close13", @"Close13"),new InputOutputColumnPair(@"High13", @"High13"),new InputOutputColumnPair(@"Low13", @"Low13"),new InputOutputColumnPair(@"Volume13", @"Volume13"),new InputOutputColumnPair(@"Open14", @"Open14"),new InputOutputColumnPair(@"Close14", @"Close14"),new InputOutputColumnPair(@"High14", @"High14"),new InputOutputColumnPair(@"Low14", @"Low14"),new InputOutputColumnPair(@"Volume14", @"Volume14"),new InputOutputColumnPair(@"Open15", @"Open15"),new InputOutputColumnPair(@"Close15", @"Close15"),new InputOutputColumnPair(@"High15", @"High15"),new InputOutputColumnPair(@"Low15", @"Low15"),new InputOutputColumnPair(@"Volume15", @"Volume15"),new InputOutputColumnPair(@"Open16", @"Open16"),new InputOutputColumnPair(@"Close16", @"Close16"),new InputOutputColumnPair(@"High16", @"High16"),new InputOutputColumnPair(@"Low16", @"Low16"),new InputOutputColumnPair(@"Volume16", @"Volume16"),new InputOutputColumnPair(@"Open17", @"Open17"),new InputOutputColumnPair(@"Close17", @"Close17"),new InputOutputColumnPair(@"High17", @"High17"),new InputOutputColumnPair(@"Low17", @"Low17"),new InputOutputColumnPair(@"Volume17", @"Volume17"),new InputOutputColumnPair(@"Open18", @"Open18"),new InputOutputColumnPair(@"Close18", @"Close18"),new InputOutputColumnPair(@"High18", @"High18"),new InputOutputColumnPair(@"Low18", @"Low18"),new InputOutputColumnPair(@"Volume18", @"Volume18"),new InputOutputColumnPair(@"Open19", @"Open19"),new InputOutputColumnPair(@"Close19", @"Close19"),new InputOutputColumnPair(@"High19", @"High19"),new InputOutputColumnPair(@"Low19", @"Low19"),new InputOutputColumnPair(@"Volume19", @"Volume19"),new InputOutputColumnPair(@"Open20", @"Open20"),new InputOutputColumnPair(@"Close20", @"Close20"),new InputOutputColumnPair(@"High20", @"High20"),new InputOutputColumnPair(@"Low20", @"Low20"),new InputOutputColumnPair(@"Volume20", @"Volume20"),new InputOutputColumnPair(@"Open21", @"Open21"),new InputOutputColumnPair(@"Close21", @"Close21"),new InputOutputColumnPair(@"High21", @"High21"),new InputOutputColumnPair(@"Low21", @"Low21"),new InputOutputColumnPair(@"Volume21", @"Volume21"),new InputOutputColumnPair(@"Open22", @"Open22"),new InputOutputColumnPair(@"Close22", @"Close22"),new InputOutputColumnPair(@"High22", @"High22"),new InputOutputColumnPair(@"Low22", @"Low22"),new InputOutputColumnPair(@"Volume22", @"Volume22"),new InputOutputColumnPair(@"Open23", @"Open23"),new InputOutputColumnPair(@"Close23", @"Close23"),new InputOutputColumnPair(@"High23", @"High23"),new InputOutputColumnPair(@"Low23", @"Low23"),new InputOutputColumnPair(@"Volume23", @"Volume23"),new InputOutputColumnPair(@"Open24", @"Open24"),new InputOutputColumnPair(@"Close24", @"Close24"),new InputOutputColumnPair(@"High24", @"High24"),new InputOutputColumnPair(@"Low24", @"Low24"),new InputOutputColumnPair(@"Volume24", @"Volume24"),new InputOutputColumnPair(@"Open25", @"Open25"),new InputOutputColumnPair(@"Close25", @"Close25"),new InputOutputColumnPair(@"High25", @"High25"),new InputOutputColumnPair(@"Low25", @"Low25"),new InputOutputColumnPair(@"Volume25", @"Volume25"),new InputOutputColumnPair(@"Open26", @"Open26"),new InputOutputColumnPair(@"Close26", @"Close26"),new InputOutputColumnPair(@"High26", @"High26"),new InputOutputColumnPair(@"Low26", @"Low26"),new InputOutputColumnPair(@"Volume26", @"Volume26"),new InputOutputColumnPair(@"Open27", @"Open27"),new InputOutputColumnPair(@"Close27", @"Close27"),new InputOutputColumnPair(@"High27", @"High27"),new InputOutputColumnPair(@"Low27", @"Low27"),new InputOutputColumnPair(@"Volume27", @"Volume27"),new InputOutputColumnPair(@"Open28", @"Open28"),new InputOutputColumnPair(@"Close28", @"Close28"),new InputOutputColumnPair(@"High28", @"High28"),new InputOutputColumnPair(@"Low28", @"Low28"),new InputOutputColumnPair(@"Volume28", @"Volume28"),new InputOutputColumnPair(@"Open29", @"Open29"),new InputOutputColumnPair(@"Close29", @"Close29"),new InputOutputColumnPair(@"High29", @"High29"),new InputOutputColumnPair(@"Low29", @"Low29"),new InputOutputColumnPair(@"Volume29", @"Volume29"),new InputOutputColumnPair(@"Open30", @"Open30"),new InputOutputColumnPair(@"Close30", @"Close30"),new InputOutputColumnPair(@"High30", @"High30"),new InputOutputColumnPair(@"Low30", @"Low30"),new InputOutputColumnPair(@"Volume30", @"Volume30"),new InputOutputColumnPair(@"Open31", @"Open31"),new InputOutputColumnPair(@"Close31", @"Close31"),new InputOutputColumnPair(@"High31", @"High31"),new InputOutputColumnPair(@"Low31", @"Low31"),new InputOutputColumnPair(@"Volume31", @"Volume31"),new InputOutputColumnPair(@"Open32", @"Open32"),new InputOutputColumnPair(@"Close32", @"Close32"),new InputOutputColumnPair(@"High32", @"High32"),new InputOutputColumnPair(@"Low32", @"Low32"),new InputOutputColumnPair(@"Volume32", @"Volume32"),new InputOutputColumnPair(@"Open33", @"Open33"),new InputOutputColumnPair(@"Close33", @"Close33"),new InputOutputColumnPair(@"High33", @"High33"),new InputOutputColumnPair(@"Low33", @"Low33"),new InputOutputColumnPair(@"Volume33", @"Volume33"),new InputOutputColumnPair(@"Open34", @"Open34"),new InputOutputColumnPair(@"Close34", @"Close34"),new InputOutputColumnPair(@"High34", @"High34"),new InputOutputColumnPair(@"Low34", @"Low34"),new InputOutputColumnPair(@"Volume34", @"Volume34"),new InputOutputColumnPair(@"Open35", @"Open35"),new InputOutputColumnPair(@"Close35", @"Close35"),new InputOutputColumnPair(@"High35", @"High35"),new InputOutputColumnPair(@"Low35", @"Low35"),new InputOutputColumnPair(@"Volume35", @"Volume35"),new InputOutputColumnPair(@"Open36", @"Open36"),new InputOutputColumnPair(@"Close36", @"Close36"),new InputOutputColumnPair(@"High36", @"High36"),new InputOutputColumnPair(@"Low36", @"Low36"),new InputOutputColumnPair(@"Volume36", @"Volume36"),new InputOutputColumnPair(@"Open37", @"Open37"),new InputOutputColumnPair(@"Close37", @"Close37"),new InputOutputColumnPair(@"High37", @"High37"),new InputOutputColumnPair(@"Low37", @"Low37"),new InputOutputColumnPair(@"Volume37", @"Volume37"),new InputOutputColumnPair(@"Open38", @"Open38"),new InputOutputColumnPair(@"Close38", @"Close38"),new InputOutputColumnPair(@"High38", @"High38"),new InputOutputColumnPair(@"Low38", @"Low38"),new InputOutputColumnPair(@"Volume38", @"Volume38"),new InputOutputColumnPair(@"Open39", @"Open39"),new InputOutputColumnPair(@"Close39", @"Close39"),new InputOutputColumnPair(@"High39", @"High39"),new InputOutputColumnPair(@"Low39", @"Low39"),new InputOutputColumnPair(@"Volume39", @"Volume39"),new InputOutputColumnPair(@"Open40", @"Open40"),new InputOutputColumnPair(@"Close40", @"Close40"),new InputOutputColumnPair(@"High40", @"High40"),new InputOutputColumnPair(@"Low40", @"Low40"),new InputOutputColumnPair(@"Volume40", @"Volume40"),new InputOutputColumnPair(@"Open41", @"Open41"),new InputOutputColumnPair(@"Close41", @"Close41"),new InputOutputColumnPair(@"High41", @"High41"),new InputOutputColumnPair(@"Low41", @"Low41"),new InputOutputColumnPair(@"Volume41", @"Volume41"),new InputOutputColumnPair(@"Open42", @"Open42"),new InputOutputColumnPair(@"Close42", @"Close42"),new InputOutputColumnPair(@"High42", @"High42"),new InputOutputColumnPair(@"Low42", @"Low42"),new InputOutputColumnPair(@"Volume42", @"Volume42"),new InputOutputColumnPair(@"Open43", @"Open43"),new InputOutputColumnPair(@"Close43", @"Close43"),new InputOutputColumnPair(@"High43", @"High43"),new InputOutputColumnPair(@"Low43", @"Low43"),new InputOutputColumnPair(@"Volume43", @"Volume43"),new InputOutputColumnPair(@"Open44", @"Open44"),new InputOutputColumnPair(@"Close44", @"Close44"),new InputOutputColumnPair(@"High44", @"High44"),new InputOutputColumnPair(@"Low44", @"Low44"),new InputOutputColumnPair(@"Volume44", @"Volume44"),new InputOutputColumnPair(@"Open45", @"Open45"),new InputOutputColumnPair(@"Close45", @"Close45"),new InputOutputColumnPair(@"High45", @"High45"),new InputOutputColumnPair(@"Low45", @"Low45"),new InputOutputColumnPair(@"Volume45", @"Volume45"),new InputOutputColumnPair(@"Open46", @"Open46"),new InputOutputColumnPair(@"Close46", @"Close46"),new InputOutputColumnPair(@"High46", @"High46"),new InputOutputColumnPair(@"Low46", @"Low46"),new InputOutputColumnPair(@"Volume46", @"Volume46"),new InputOutputColumnPair(@"Open47", @"Open47"),new InputOutputColumnPair(@"Close47", @"Close47"),new InputOutputColumnPair(@"High47", @"High47"),new InputOutputColumnPair(@"Low47", @"Low47"),new InputOutputColumnPair(@"Volume47", @"Volume47"),new InputOutputColumnPair(@"Open48", @"Open48"),new InputOutputColumnPair(@"Close48", @"Close48"),new InputOutputColumnPair(@"High48", @"High48"),new InputOutputColumnPair(@"Low48", @"Low48"),new InputOutputColumnPair(@"Volume48", @"Volume48"),new InputOutputColumnPair(@"Open49", @"Open49"),new InputOutputColumnPair(@"Close49", @"Close49"),new InputOutputColumnPair(@"High49", @"High49"),new InputOutputColumnPair(@"Low49", @"Low49"),new InputOutputColumnPair(@"Volume49", @"Volume49"),new InputOutputColumnPair(@"Open50", @"Open50"),new InputOutputColumnPair(@"Close50", @"Close50"),new InputOutputColumnPair(@"High50", @"High50"),new InputOutputColumnPair(@"Low50", @"Low50"),new InputOutputColumnPair(@"Volume50", @"Volume50")})      
                                    .Append(mlContext.Transforms.Concatenate(@"Features", new []{@"Open",@"Close",@"High",@"Low",@"Volume",@"Open2",@"Close2",@"High2",@"Low2",@"Volume2",@"Open3",@"Close3",@"High3",@"Low3",@"Volume3",@"Open4",@"Close4",@"High4",@"Low4",@"Volume4",@"Open5",@"Close5",@"High5",@"Low5",@"Volume5",@"Open6",@"Close6",@"High6",@"Low6",@"Volume6",@"Open7",@"Close7",@"High7",@"Low7",@"Volume7",@"Open8",@"Close8",@"High8",@"Low8",@"Volume8",@"Open9",@"Close9",@"High9",@"Low9",@"Volume9",@"Open10",@"Close10",@"High10",@"Low10",@"Volume10",@"Open11",@"Close11",@"High11",@"Low11",@"Volume11",@"Open12",@"Close12",@"High12",@"Low12",@"Volume12",@"Open13",@"Close13",@"High13",@"Low13",@"Volume13",@"Open14",@"Close14",@"High14",@"Low14",@"Volume14",@"Open15",@"Close15",@"High15",@"Low15",@"Volume15",@"Open16",@"Close16",@"High16",@"Low16",@"Volume16",@"Open17",@"Close17",@"High17",@"Low17",@"Volume17",@"Open18",@"Close18",@"High18",@"Low18",@"Volume18",@"Open19",@"Close19",@"High19",@"Low19",@"Volume19",@"Open20",@"Close20",@"High20",@"Low20",@"Volume20",@"Open21",@"Close21",@"High21",@"Low21",@"Volume21",@"Open22",@"Close22",@"High22",@"Low22",@"Volume22",@"Open23",@"Close23",@"High23",@"Low23",@"Volume23",@"Open24",@"Close24",@"High24",@"Low24",@"Volume24",@"Open25",@"Close25",@"High25",@"Low25",@"Volume25",@"Open26",@"Close26",@"High26",@"Low26",@"Volume26",@"Open27",@"Close27",@"High27",@"Low27",@"Volume27",@"Open28",@"Close28",@"High28",@"Low28",@"Volume28",@"Open29",@"Close29",@"High29",@"Low29",@"Volume29",@"Open30",@"Close30",@"High30",@"Low30",@"Volume30",@"Open31",@"Close31",@"High31",@"Low31",@"Volume31",@"Open32",@"Close32",@"High32",@"Low32",@"Volume32",@"Open33",@"Close33",@"High33",@"Low33",@"Volume33",@"Open34",@"Close34",@"High34",@"Low34",@"Volume34",@"Open35",@"Close35",@"High35",@"Low35",@"Volume35",@"Open36",@"Close36",@"High36",@"Low36",@"Volume36",@"Open37",@"Close37",@"High37",@"Low37",@"Volume37",@"Open38",@"Close38",@"High38",@"Low38",@"Volume38",@"Open39",@"Close39",@"High39",@"Low39",@"Volume39",@"Open40",@"Close40",@"High40",@"Low40",@"Volume40",@"Open41",@"Close41",@"High41",@"Low41",@"Volume41",@"Open42",@"Close42",@"High42",@"Low42",@"Volume42",@"Open43",@"Close43",@"High43",@"Low43",@"Volume43",@"Open44",@"Close44",@"High44",@"Low44",@"Volume44",@"Open45",@"Close45",@"High45",@"Low45",@"Volume45",@"Open46",@"Close46",@"High46",@"Low46",@"Volume46",@"Open47",@"Close47",@"High47",@"Low47",@"Volume47",@"Open48",@"Close48",@"High48",@"Low48",@"Volume48",@"Open49",@"Close49",@"High49",@"Low49",@"Volume49",@"Open50",@"Close50",@"High50",@"Low50",@"Volume50"}))      
                                    .Append(mlContext.Regression.Trainers.FastForest(new FastForestRegressionTrainer.Options(){NumberOfTrees=34,FeatureFraction=0.814582271795856F,LabelColumnName=@"Open51",FeatureColumnName=@"Features"}));

            return pipeline;
        }
    }
}
